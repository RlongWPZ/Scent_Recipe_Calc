<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synthetic Scent Lure Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c5530;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .controls-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .control-label {
            min-width: 150px;
            font-weight: bold;
        }
        
        .slider-container {
            flex: 1;
            min-width: 200px;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2c5530;
            cursor: pointer;
        }
        
        .value-input {
            width: 100px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .unit-label {
            min-width: 60px;
            color: #666;
            font-weight: bold;
        }
        
        .presets {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .preset-btn {
            padding: 8px 16px;
            background: #2c5530;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 12px;
        }
        
        .preset-btn:hover {
            background: #3d6b42;
        }
        
        .recipe-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .ingredients-table {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .table-header {
            background: #2c5530;
            color: white;
            padding: 15px;
            font-weight: bold;
            text-align: center;
        }
        
        .table-content {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .ingredient-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            align-items: center;
        }
        
        .ingredient-row:nth-child(even) {
            background: #f8f9fa;
        }
        
        .ingredient-name {
            font-weight: 500;
        }
        
        .ingredient-amount {
            text-align: center;
            font-weight: bold;
            color: #2c5530;
        }
        
        .ingredient-unit {
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        
        .total-row {
            background: #e8f4e8 !important;
            font-weight: bold;
            border-top: 2px solid #2c5530;
        }
        
        .summary-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2c5530;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-value {
            font-weight: bold;
            color: #2c5530;
        }
        
        .instructions {
            background: #e8f4e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2c5530;
        }
        
        @media (max-width: 900px) {
            .recipe-results {
                grid-template-columns: 1fr;
            }
            
            .control-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .control-label {
                min-width: auto;
            }
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 4px;
            margin-top: 15px;
        }
        
        .note {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 10px;
            border-radius: 4px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öóÔ∏è Synthetic Scent Lure Calculator</h1>
        <p class="subtitle">Woodland Park Zoo</p>
        
        <div class="instructions">
            <strong>How to use:</strong> Choose your target dispenser size and the number of dispensers to fill. The calculator will scale all ingredients proportionally and show you exactly how much of each ingredient to measure.
        </div>
        
        <div class="controls-section">
            <h3>‚öóÔ∏è Synthetic Recipe Configuration</h3>
            <p><strong>Base Recipe:</strong> 68 oz total (Keon Final Report ratios)</p>
            
            <h4>üß¥ Volume Configuration</h4>
            <div class="control-group">
                <div class="control-label">Dispenser Size:</div>
                <div class="slider-container">
                    <input type="range" id="pouchSlider" class="slider" min="1" max="64" value="28" step="1">
                </div>
                <input type="number" id="pouchInput" class="value-input" value="28" step="1" min="1" max="64">
                <span class="unit-label">oz</span>
            </div>
            
            <div class="control-group">
                <div class="control-label">Number of Dispensers:</div>
                <div class="slider-container">
                    <input type="range" id="countSlider" class="slider" min="1" max="50" value="1" step="1">
                </div>
                <input type="number" id="countInput" class="value-input" value="1" step="1" min="1" max="50">
                <span class="unit-label">dispensers</span>
            </div>
            
            <h4>Quick Presets</h4>
            <div class="presets">
                <button class="preset-btn" onclick="setVolume(4, 1)">4oz √ó 1</button>
                <button class="preset-btn" onclick="setVolume(8, 1)">8oz √ó 1</button>
                <button class="preset-btn" onclick="setVolume(12, 1)">12oz √ó 1</button>
                <button class="preset-btn" onclick="setVolume(17, 1)">17oz √ó 1</button>
                <button class="preset-btn" onclick="setVolume(20, 1)">20oz √ó 1</button>
                <button class="preset-btn" onclick="setVolume(24, 1)">24oz √ó 1</button>
                <button class="preset-btn" onclick="setVolume(28, 5)">28oz √ó 5</button>
                <button class="preset-btn" onclick="setVolume(4, 10)">4oz √ó 10</button>
            </div>
        </div>
        
        <!-- Results Section -->
        <div class="recipe-results">
            <!-- Ingredients Table -->
            <div class="ingredients-table">
                <div class="table-header" id="ingredientsHeader">
                    Recipe Ingredients
                </div>
                <div class="table-content" id="ingredientsList">
                    <!-- Ingredients will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Summary -->
            <div class="summary-section">
                <h4>üìä Batch Summary</h4>
                <div id="batchSummary">
                    <!-- Summary will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const recipe = {
            baseSize: 68, // oz (calculated from sum)
            ozToMl: 29.5735,
            ingredients: [
                { name: "Propylene glycol", amount: 38, unit: "oz", type: "liquid" },
                { name: "Water", amount: 25, unit: "oz", type: "liquid" },
                { name: "Synthetic castoreum (Givco)", amount: 2, unit: "ml", type: "aromatic" },
                { name: "4-ethylphenol (beaver castor sub)", amount: 2, unit: "ml", type: "aromatic" },
                { name: "Undecanal (fish oil sub)", amount: 0.5, unit: "ml", type: "aromatic" },
                { name: "Undecanone (fish oil sub)", amount: 1, unit: "ml", type: "aromatic" },
                { name: "2-phenylethanethiol (skunk sub)", amount: 0.05, unit: "ml", type: "aromatic" },
                { name: "Anise oil", amount: 0.5, unit: "ml", type: "aromatic" }
            ]
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            calculateRecipe();
        });
        
        function setupEventListeners() {
            document.getElementById('pouchSlider').addEventListener('input', syncControls);
            document.getElementById('pouchInput').addEventListener('input', syncControls);
            document.getElementById('countSlider').addEventListener('input', syncControls);
            document.getElementById('countInput').addEventListener('input', syncControls);
        }
        
        function syncControls() {
            const pouchSlider = document.getElementById('pouchSlider');
            const pouchInput = document.getElementById('pouchInput');
            const countSlider = document.getElementById('countSlider');
            const countInput = document.getElementById('countInput');
            
            if (event.target === pouchSlider) pouchInput.value = pouchSlider.value;
            if (event.target === pouchInput) pouchSlider.value = pouchInput.value;
            if (event.target === countSlider) countInput.value = countSlider.value;
            if (event.target === countInput) countSlider.value = countInput.value;
            
            calculateRecipe();
        }
        
        function setVolume(pouchSize, count) {
            document.getElementById('pouchSlider').value = pouchSize;
            document.getElementById('pouchInput').value = pouchSize;
            document.getElementById('countSlider').value = count;
            document.getElementById('countInput').value = count;
            calculateRecipe();
        }
        
        function calculateRecipe() {
            const pouchSize = parseFloat(document.getElementById('pouchInput').value);
            const pouchCount = parseInt(document.getElementById('countInput').value);
            
            if (isNaN(pouchSize) || isNaN(pouchCount) || pouchSize <= 0 || pouchCount <= 0) {
                document.getElementById('ingredientsList').innerHTML = '<div class="ingredient-row"><div class="ingredient-name">Invalid parameters</div></div>';
                document.getElementById('batchSummary').innerHTML = '<div class="summary-row"><span>Check dispenser size and count values</span></div>';
                return;
            }
            
            const totalVolumeOz = pouchSize * pouchCount;
            
            let html = '';
            const scaleFactor = totalVolumeOz / recipe.baseSize;
            let totalAromaticsMl = 0;
            
            recipe.ingredients.forEach(ingredient => {
                let totalAmount = ingredient.amount * scaleFactor;
                
                if (ingredient.unit === 'ml') {
                    totalAmount = totalAmount * recipe.ozToMl;
                    totalAromaticsMl += totalAmount;
                }
                
                html += `
                    <div class="ingredient-row">
                        <div class="ingredient-name">${ingredient.name}</div>
                        <div class="ingredient-amount">${totalAmount.toFixed(3)}</div>
                        <div class="ingredient-unit">${ingredient.unit}</div>
                    </div>
                `;
            });
            
            html += `<div class="ingredient-row total-row">
                        <div class="ingredient-name">BATCH MIXING EQUIVALENTS</div>
                        <div class="ingredient-amount"></div>
                        <div class="ingredient-unit"></div>
                     </div>`;
            
            recipe.ingredients.forEach(ingredient => {
                let totalAmount = ingredient.amount * scaleFactor;
                
                if (ingredient.unit === 'ml') {
                    totalAmount = totalAmount * recipe.ozToMl;
                    html += `
                        <div class="ingredient-row">
                            <div class="ingredient-name">‚Üí ${ingredient.name}</div>
                            <div class="ingredient-amount">${totalAmount.toFixed(2)} ml</div>
                            <div class="ingredient-unit">precise</div>
                        </div>
                    `;
                } else {
                    const gallons = totalAmount / 128;
                    const quarts = totalAmount / 32;
                    
                    let batchDisplay = '';
                    if (totalAmount >= 128) {
                        batchDisplay = `${gallons.toFixed(2)} gal`;
                    } else if (totalAmount >= 32) {
                        batchDisplay = `${quarts.toFixed(2)} qt`;
                    } else if (totalAmount >= 16) {
                        batchDisplay = `${(totalAmount / 16).toFixed(2)} pt`;
                    } else {
                        batchDisplay = `${totalAmount.toFixed(2)} oz`;
                    }
                    
                    html += `
                        <div class="ingredient-row">
                            <div class="ingredient-name">‚Üí ${ingredient.name}</div>
                            <div class="ingredient-amount">${batchDisplay}</div>
                            <div class="ingredient-unit">batch</div>
                        </div>
                    `;
                }
            });
            
            document.getElementById('ingredientsList').innerHTML = html;
            document.getElementById('ingredientsHeader').textContent = `Synthetic Recipe - ${pouchCount} √ó ${pouchSize}oz dispensers`;
            
            const summaryHtml = `
                <div class="summary-row">
                    <span>Dispenser Configuration:</span>
                    <span class="summary-value">${pouchCount} √ó ${pouchSize}oz</span>
                </div>
                <div class="summary-row">
                    <span>Total Volume:</span>
                    <span class="summary-value">${totalVolumeOz.toFixed(1)} oz</span>
                </div>
                <div class="summary-row">
                    <span>Scale Factor:</span>
                    <span class="summary-value">${scaleFactor.toFixed(3)}x base recipe</span>
                </div>
                <div class="summary-row">
                    <span>Total Aromatics:</span>
                    <span class="summary-value">${totalAromaticsMl.toFixed(2)} ml</span>
                </div>
                <div class="summary-row">
                    <span>Batch Size:</span>
                    <span class="summary-value">${totalVolumeOz >= 128 ? (totalVolumeOz/128).toFixed(2) + ' gallons' : totalVolumeOz.toFixed(1) + ' oz'}</span>
                </div>
                ${totalVolumeOz > 256 ? '<div class="note">üìã Large batch - consider mixing in stages</div>' : ''}
                ${totalAromaticsMl < 1 ? '<div class="warning">‚ö†Ô∏è Very small aromatic amounts - use precision pipettes</div>' : ''}
                ${pouchSize < 4 ? '<div class="warning">‚ö†Ô∏è Very small dispensers - ensure minimum viable batch size</div>' : ''}
            `;
            
            document.getElementById('batchSummary').innerHTML = summaryHtml;
        }
    </script>
</body>
</html>